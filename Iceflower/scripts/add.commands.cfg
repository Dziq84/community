//Author: Iceflower


//PRIVLEV returns the privileg level you are
//hiw: getclientpriv returns one if you have this level and 0 if you havent
//for your own use: (privlev getclientnum)
setdesc "privlev" "returns the priv level of a player" "<cn>"
privlev = [
	cn_num = $arg1
	levtest = 1	//prepare loop
	loopwhile itemp 8 [ = $levtest 1 ] [	//counts to 7
		levtest = (getclientpriv $cn_num $itemp)
		privlev_v = $itemp	//save privlev because itemp will be cleared after the loop
	]
	result (- $privlev_v 1)	//privlev returns now the priv level value
]

//NUMSUGGESTIONS returns the numbers of suggestions in the vote rotation if it has at least [<value>] (default 0) votes
//hiw:	(getvote X 3) returns the name of the X´s map suggestions in the roatation, if the X´s item not exists (no more map in the vote list) it returns ""
//		so i look until it returns "" and count all maps which has more then Y votes (getvote X 0) returns the number of votes for this X´s map
setdesc "numsuggestions" "returns the numbers of suggestions in the vote rotation if it has at least [<value>] (default 0) votes" "[<value>]"
numsuggestions = [
	votelev_v = $arg1
	itemp = 0	//prepare while
	numsuggestions_v = 0
		while [!=s (getvote $itemp 3) ""] [	//counts so long as a "" (empty name map (= no more map in the vote list)) is there; have all voted maps there
			if (>= (getvote $itemp 1) votelev_v) [	// count when the current map in the loop has over $votelev_v or $votelev_v votes
				numsuggestions_v = (+ $numsuggestions_v 1)
			]
			itemp = (+ $itemp 1)	//loop counter: itemp
		]
	result ($numsuggestions_v)	//result is how much votes are existing with consideration of the condition
]

//PLAYERSONSERV returns the number of player which are on the server
//hiw:	listclients returns a list of al cn, and isai looks if the cn is a ai, if not the cn will saved to the new list playercn_list
playersonserv = [
	playercn_list = []
			looplist  cn (listclients 1) [
				if  (! (isai $cn))  [
					playercn_list = (concat $playercn_list $cn)
				]
	]
	result (listlen $playercn_list)
]