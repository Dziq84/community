//Author: Iceflower


//PRIVLEV returns the privileg level you are
//hiw: getclientpriv returns one if you have this level and 0 if you havent
//for your own use: (privlev getclientnum)
setdesc "privlev" "returns the priv level of a player" "<cn>"
privlev = [
	cn_num = $arg1
	levtest = 1 //prepare loop
	loopwhile itemp 8 [ = $levtest 1 ] [levtest = (getclientpriv $cn_num $itemp); privlev_v = $itemp;] //counts to 7 //save privlev because itemp will be cleared after the loop
	result (- $privlev_v 1) //privlev returns now the priv level value
]

//GETNUMVOTES returns the numbers of suggestions in the vote rotation with more then [<value>] (default 0) votes
//hiw: (getvote X 3) returns the name of the X´s map suggestions in the roatation, if the X´s item not exists (no more map in the vote list) it returns ""
//	   so i look until it returns "" and count all maps which has more then Y votes (getvote X 0) returns the number of votes for this X´s map
setdesc "getnumvotes" "returns the numbers of suggestions in the vote rotation with more then [<value>] (default 0) votes" "[<value>]"
getnumvotes = [
	votelev_v = $arg1
	itemp = 0	//prepare while
	numvotes_v = 0
		while [!=s (getvote $itemp 3) ""] [ //counts so long as a "" (empty name map (= no more map in the vote list)) is there; have all voted maps there
			if (>= (getvote $itemp 1) votelev_v) [	// count when the current map in the loop has over $votelev_v or $votelev_v votes
				numvotes_v = (+ $numvotes_v 0)
				echo $numvotes_v
			]
			itemp = (+ $itemp 1)  //loop counter: itemp
		]
	result ($numvotes_v)  //result is how much votes are existing with consideration of the condition
]